{% extends 'base.html.twig' %}

{% block title %}Quizz
{% endblock %}

{% block body %}
	<div id="main-contener">
		<div class="questions-contener">
			<div class="quizz-entete">
				<h2>
					{{liste.titre}}</h2>
				<div class="circle-bouton-close supprimer-button">
					<a href="">
						<img src="{{ asset('img/close-icon.png') }}" alt="Retour">
					</a>
				</div>
			</div>
			<div class="quizz-question-info">
				<p>
					{{i_question}}
					/
					{{liste.traduction.count()}}
					mots</p>
				<p>Difficulté :
					{{p_difficulte}}</p>
				<p>Score :
					{{scoreEnPourcentage}}
					%</p>
				<p>Langue cible :
					{{langue_cible}}</p>
				{% if majStatut == true %}
					<p>(les majuscules sont importantes)</p>
				{% endif %}
			</div>
			<div class='a-traduire'>
				<p class='a-traduire'>{{a_traduire}}</p>
			</div>
			<div class='reponse-et-icon'>

				{% if corrige == "Correct"  %}
					<input class='correct' readonly value={{reponse}}>
					<p class='icon-corrige'>✅</p>
				{% else %}
					<input class='incorrect' readonly value={{reponse}}>
					<p class='icon-corrige'>❌</p>
				{% endif %}
			</div>

			<div class="bonne-reponse">
				{% if corrige == "Incorrect"  %}
					<p>La bonne réponse était</p>
					<p class='bonne-reponse-p'>{{bonneReponse}}</p>

				{% endif %}

			</div>

			<div class="boutons-questions">
				<a href="{{path('app_quizz', {'id_liste': id_liste, 'difficulte': difficulte, 'langue_cible': langue_cible} )}}">
					<button id='bouton-suivant'>
						Suivant
					</button>
				</a>

				<script defer>
					(function () {
function init() {
const boutonSuivant = document.getElementById('bouton-suivant');
if (! boutonSuivant) {
return;
}

const onKeydown = function (e) {
if (e.key !== 'Enter') 
return;

const active = document.activeElement;
//Récupère le tag s'il y a bien un element active
const tag = active && active.tagName ? active.tagName.toUpperCase() : '';
// Ne pas intercepter Enter quand on est en train de saisir dans un champ (exemple dans quizz questions)
if (tag === 'INPUT' || tag === 'TEXTAREA') 
return;
//Sinon on clique sur boutonSuivant
boutonSuivant.click();
};

//Lancer la fonction quand on keydown
window.addEventListener('keydown', onKeydown);


// Arrêter le listener pour les pages suivantes (sinon ça bug sur quizz_questions)
document.addEventListener('turbo:before-render', function () {
window.removeEventListener('keydown', onKeydown);
}, {once: true});
window.addEventListener('pagehide', function () {
window.removeEventListener('keydown', onKeydown);
}, {once: true});
}

if (document.readyState === 'loading') {
document.addEventListener('DOMContentLoaded', init, {once: true});
} else {
init();
}
})();
				</script>
			</div>
		</div>
	</div>
</div></div></div><div class='confirm_delete hidden shadow-box'><img src="{{asset('img/attention-icon.png')}}"><p>Êtes-vous sûr-e de vouloir quitter ?</p><p>Votre score ne sera pas enregistré.</p><div class='show-delete-buttons'>
<button class='cancel_delete shadow-box'>Annuler</button>
<a href="{{path('app_accueil')}}">
	<button class="supprimer-button supprimer-button-show-delete shadow-box">Retour à l'accueil</button>
</a></div></div></div></div>{% endblock %}
