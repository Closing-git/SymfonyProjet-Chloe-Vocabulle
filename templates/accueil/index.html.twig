{% extends 'base.html.twig' %}

{% block title %}Accueil
{% endblock %}

{% block body %}
	<div id="main-contener">
		<div class="cards-contener-main shadow-box">
			<div class="options-search">
				<div>
					{{ form_start(form, {'attr': {'id': 'recherche-form',
								'data-route': path('app_recherche') }}) }}
					{{ form_row(form.langue) }}
					{{ form_row(form.ordre) }}
					{{ form_row(form.statut) }}
					<div class="checkbox-input">
						<p>Créer par moi
						</p>
						{{ form_row(form.ownCreator) }}
					</div>
					<div class="checkbox-input">
						<p>Favori
						</p>
						{{ form_row(form.fav) }}
					</div>
				</div>
				<div class='circle-plus-button'>
					<a href="{{path('app_ajouter_liste')}}">
						<img src="{{asset('img/plus-icon.png')}}">
					</a>
				</div>
			</div>
			<div id="recherche-titre">{{ form_row(form.titre) }}</div>
			{{ form_end(form) }}
			<div class="cards-contener">
				<div class='circle-plus-button'>
					<img src="{{asset('img/fleche-precedent.png')}}">
				</div>
				{% for liste in listesVocabulaire %}
					<div class="card">
						<div class='en-tete-card'>

							<span class="langue">{{ liste.getLangues()[0].nom }}</span>
							{% if liste.publicStatut %}
								<div class="createur-liste">
									<img src="{{asset('img/public-statut.png')}}">
									<p>{{ liste.getCreateur().getNom() }}</p>
								</div>
							{% endif %}
							<span class="langue">{{ liste.getLangues()[1].nom }}</span>
						</div>
						<div class="titre-liste-contener">
							<p class="titre-liste shadow">
								{{liste.titre}}</p>
						</div>
						<span class="note-liste">Note :</span>
						{% if liste.getNoteTotale() %}
							{{liste.getNoteTotale()}}
						{% else %}
							<div class="pas-de-note">
								<span>Pas encore de note
								</span>
							</div>
						{% endif %}
						<form
							method="post" action="{{ path('app_fav_toggle', { id: liste.id }) }}">
							{# TOKEN pour se protéger #}
							<input type="hidden" name="_token" value="{{ csrf_token('fav_toggle_' ~ liste.id) }}">
							<button type="submit" class="fav-toggle">
								{% if app.user in liste.getUtilisateursQuiFav() %}
									Retirer des favoris
								{% else %}
									Ajouter aux favoris
								{% endif %}
							</button>
						</form>
						<p class="favori-liste">Favori :
							{% if app.user in (liste.getUtilisateursQuiFav()) %}
								OUI
							{% else %}
								NON
							{% endif %}
						</p>

						<p class="meilleur-score">Meilleur Score :
							{{ liste.getBestScoreMostDifficult(app.user) }}
						</p>


						{# Changer le path plus tard #}
						<a href="{{path('app_quizzoptions', {id_liste:liste.id} )}}">
							<button class="play-button">Play</button>
						</a>
						<a href="{{path('app_modifier_liste', {id_liste:liste.id} )}}">
							<button class="modifier-button">Modifier</button>
						</a>
						<button class="supprimer-button">Supprimer</button>

						<div class='confirm_delete hidden'>
							<p>Êtes-vous sûr-e de vouloir supprimer la liste :
								{{liste.titre}}
								?</p>
							<button class='cancel_delete'>Annuler</button>
							<a href="{{path('app_supprimer_liste', {id_liste:liste.id} )}}">
								<button class="supprimer-button">Supprimer</button>
							</a>
						</div>

						<br><br>
					</div>
				{% endfor %}
				<div class='circle-plus-button'>
					<img src="{{asset('img/fleche-suivant.png')}}">
				</div>

			</div>
			<br>
			<a href="{{path('app_ajouter_liste')}}">
				<button>Ajouter une liste</button>
			</a>
		</div>

	</div>
{% endblock %}
